var observer=new IntersectionObserver(onIntersection,{root:null,rootMargin:"-150px"});const sections=["me","about","skills","proyects","contact"];function onIntersection(e,t){e.forEach(e=>{if(e.isIntersecting){if("SECTION"===e.target.tagName){e.target.classList.add("visible"),observer.unobserve(e.target);const t=sections[sections.findIndex(t=>t===e.target.id)+1];t&&document.querySelectorAll(`#${t} img[data-src], #${e.target.id} img[data-src]`).forEach(e=>{e.src=e.getAttribute("data-src"),e.removeAttribute("data-src")})}if("skills"===e.target.id){let e=document.createElement("script");e.src="tilt.min.js",document.head.appendChild(e)}else if("proyects"===e.target.id){let e=document.createElement("script");e.src="swiped-events.min.js",document.head.appendChild(e)}else if("carrousel"===e.target.id){if(!e.isIntersecting||window.innerWidth>1e3)return;setTimeout(()=>{e.target.classList.add("visible"),setTimeout(()=>{e.target.classList.remove("visible")},1e3)},5e3)}}})}document.querySelectorAll("section").forEach(e=>{observer.observe(e)}),observer.observe(document.querySelector("#carrousel")),document.querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>{const r=e.getAttribute("href");r.includes("#")&&(t.preventDefault(),document.querySelector(r).scrollIntoView())})}),document.querySelectorAll(".spanText span:not(.blank)").forEach(e=>{e.addEventListener("mouseover",t=>{e.classList.add("animated")}),e.addEventListener("animationend",t=>{e.classList.remove("animated")})});const handleSubmit=e=>{e.preventDefault();let t=document.getElementById("contact-form"),r=new FormData(t);fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()}).then(()=>{t.reset(),document.querySelector(".form-submit-wrapper").classList.add("visible"),setTimeout(()=>{document.querySelector(".form-submit-wrapper").classList.remove("visible"),document.querySelector(".form-submit-wrapper").classList.add("leave"),setTimeout(()=>{document.querySelector(".form-submit-wrapper").classList.remove("leave")},800)},3e3)}).catch(e=>alert(e))};document.querySelector("form").addEventListener("submit",handleSubmit),[...document.querySelectorAll("#me .content h1 span")].map((e,t)=>{e.style.setProperty("animation-delay",`${50*t}ms`,""),e.classList.add("bounceIn"),e.addEventListener("animationend",t=>{"bounceIn"===t.animationName&&(e.style.setProperty("opacity","1",""),e.classList.remove("bounceIn"),e.style.setProperty("animation-delay","",""))})});const images=document.querySelector("#proyects .cards"),firstCardClone=images.children[0].cloneNode(!0),lastCardClone=images.children[images.children.length-1].cloneNode(!0),originals=[];document.querySelectorAll("#proyects .card").forEach(e=>{const t=e.cloneNode(!0);t.classList.remove("visible"),originals.push(t)}),images.insertBefore(lastCardClone,images.children[0]),images.appendChild(firstCardClone);let cardWidth,currentCard=3;cardWidth=window.innerWidth<1e3?.8*window.innerWidth+10:460,images.style.transform=`translate(-${currentCard*cardWidth}px)`,images.addEventListener("swiped",e=>{switch(e.detail.dir){case"right":handleCardClickNeg(1);break;case"left":handleCardClickPos(1)}}),images.addEventListener("mousedown",e=>{e.path.forEach(e=>{if(e.classList&&e.classList.contains("card")){const t=Array.prototype.slice.call(images.children).indexOf(e)-currentCard;t>0?handleCardClickPos(t):t<0&&handleCardClickNeg(-t)}})});let currentOriginalPos=1;const handleCardClickPos=e=>{images.style.setProperty("pointer-events","none"),currentCard+=e,images.style.transitionDuration="0.5s",images.style.transform=`translate(-${currentCard*cardWidth}px)`;for(var t=0;t<e;t++){const e=originals[currentOriginalPos].cloneNode(!0),t=images.appendChild(e);t.getElementsByTagName("img")[0].src=t.getElementsByTagName("img")[0].getAttribute("data-src"),t.getElementsByTagName("img")[0].removeAttribute("data-src"),(currentOriginalPos+=1)>originals.length-1&&(currentOriginalPos-=originals.length)}images.children[currentCard].classList.add("visible"),images.children[currentCard-e].classList.remove("visible"),setTimeout(()=>{images.style.setProperty("pointer-events","all"),currentCard-=e;for(var t=0;t<e;t++)images.children[0].remove();images.style.transitionDuration="0s",images.style.transform=`translate(-${currentCard*cardWidth}px)`},500),(currentOriginalNeg-=e)<=0&&(currentOriginalNeg+=originals.length)};let currentOriginalNeg=2;const handleCardClickNeg=e=>{images.style.setProperty("pointer-events","none"),currentCard-=e,images.children[currentCard+e].classList.remove("visible"),images.children[currentCard].classList.add("visible");for(var t=0;t<e;t++){const e=originals[originals.length-currentOriginalNeg].cloneNode(!0),t=images.insertBefore(e,images.children[0]);t.getElementsByTagName("img")[0].src=t.getElementsByTagName("img")[0].getAttribute("data-src"),t.getElementsByTagName("img")[0].removeAttribute("data-src"),(currentOriginalNeg+=1)>originals.length&&(currentOriginalNeg-=originals.length)}images.style.transitionDuration="0s",images.style.transform=`translate(-${(3+e)*cardWidth}px)`,setTimeout(()=>{images.style.transitionDuration="0.5s",images.style.transform=`translate(-${3*cardWidth}px)`},10),setTimeout(()=>{images.style.setProperty("pointer-events","all"),currentCard+=e;for(var t=0;t<e;t++)images.children[images.children.length-1].remove()},500),(currentOriginalPos-=e)<0&&(currentOriginalPos+=originals.length,console.log(currentOriginalPos))};import{spline}from"https://cdn.skypack.dev/@georgedoescode/spline@1.0.1";import SimplexNoise from"https://cdn.skypack.dev/simplex-noise@2.4.0";const setupAvatar=()=>{const e=avatar.contentDocument.querySelector("path"),t=avatar.contentDocument.getElementById("react-path-2");avatar.contentDocument.getElementById("transform").setAttribute("transform","translate(845.000000, 1130.000000)"),t.setAttribute("transform","translate(0, -5)");let r=5e-4;const n=new SimplexNoise,s=function(){const e=[],t=2*Math.PI/5;for(let r=1;r<=5;r++){const n=r*t,s=100+78*Math.cos(n),a=100+78*Math.sin(n);e.push({x:s,y:a,originX:s,originY:a,noiseOffsetX:1e3*Math.random(),noiseOffsetY:1e3*Math.random()})}return e}();function a(e,t,r,n,s){return(e-t)/(r-t)*(s-n)+n}function i(e,t){return n.noise2D(e,t)}!function n(){e.setAttribute("d",spline(s,1,!0)),t.setAttribute("d",spline(s,1,!0));const o=e.getBoundingClientRect(),l=avatar.getBoundingClientRect(),c=document.getElementById("hoverelement");c.style.setProperty("left",`${o.left+l.left}px`,""),c.style.setProperty("top",`${o.top+l.top}px`,""),c.style.setProperty("width",`${o.width}px`,""),c.style.setProperty("height",`${o.height}px`,"");for(let e=0;e<s.length;e++){const t=s[e],n=i(t.noiseOffsetX,t.noiseOffsetX),o=i(t.noiseOffsetY,t.noiseOffsetY),l=a(n,-1,1,t.originX-20,t.originX+20),c=a(o,-1,1,t.originY-20,t.originY+20);t.x=l,t.y=c,t.noiseOffsetX+=r,t.noiseOffsetY+=r}requestAnimationFrame(n)}(),document.querySelector("#me #hoverelement").addEventListener("mouseover",()=>{r=.001}),document.querySelector("#me #hoverelement").addEventListener("mouseleave",()=>{r=5e-4})},avatar=document.getElementById("avatar");avatar.contentDocument&&"complete"!==avatar.contentDocument.readyState?avatar.contentDocument.addEventListener("load",setupAvatar):avatar.contentDocument&&setupAvatar(),avatar.addEventListener("load",setupAvatar),"serviceWorker"in navigator?window.addEventListener("load",function(){navigator.serviceWorker.register("worker.js").then(function(e){},function(e){}).catch(function(e){console.log(e)})}):console.log("Service Worker is not supported by browser.");